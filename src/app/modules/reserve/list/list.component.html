<div class="container">
  <ea-list-page
    #listPage
    url="/reserve/queryReserve"
    [queryNode]="queryNode"
    [tableThead]="[ '宝宝头像','学号', '宝宝姓名', '宝宝小名', '手机号', '性别', '月龄', '生日', '学员类型', '班级', '老师', '预约状态', '预约时间', 
    '操作时间', '备注', '操作' ]"
    [EaBtns]="EaBtns"
    [showPage]="false"
    [paramsInit]="paramsInit"
    [EaTableTbodyTr]="EaTableTbodyTr">
  </ea-list-page>
  <ng-template #EaBtns>
    <form nz-form nzLayout="inline" [formGroup]="weilaiForm">
      <div nz-col style="width: 600px">
        <nz-radio-group formControlName="weilai" style="width: 100%; display: flex;">
          <label style="flex: 1; text-align: center" *ngFor="let option of weilaiOptionList" nz-radio-button [nzValue]="option.id">{{
            option.name }}</label>
        </nz-radio-group>
      </div>
    </form>
  </ng-template>

  <ng-template let-data #EaTableTbodyTr>
    <td>
      <nz-avatar nzShape="square" [nzOverlayStyle]="{padding: '0 !important'}" nzPlacement="rightBottom" [nzSrc]="data.headPhoto"
        nz-tooltip [nzTitle]="titleTemplate"></nz-avatar>
      <ng-template #titleTemplate>
        <img [src]="data.headPhoto" [ngStyle]="{'max-width': '226px', 'max-height': '400px', 'transform': 'scale(1.1)'}">
      </ng-template>
    </td>
    <td>{{ data.studentNum }}</td>
    <td>{{ data.studentName	 }}</td>
    <td>{{ data.nickName	}}</td>
    <td>{{ data.mobilePhone }}</td>
    <td>{{ data.sex }}</td>
    <td>{{ data.monthAge }}</td>
    <td>{{ data.birthday }}</td>
    <td>{{ data.reserveType == 0 ? '长期' : data.reserveType == 1 ? '日托' : data.reserveType == 3 ? '体验' : '未知' }}</td>
    <td>{{ data.className }}</td>
    <td>{{ data.teacherName }}</td>
    <td>{{ data.reserveStatus == 0 ? '未到校' : data.reserveStatus == 1 ? '已到校' : data.reserveStatus == 2 ? '已离校' : data.reserveStatus == 3 ? '请假' : data.reserveStatus == 4 ? '已撤销' : '未知' }}</td>
    <td>{{ data.reserveDate }}</td>
    <td>{{ data.createTime }}</td>
    <td>{{ data.comment }}</td>
    <td>
      <a nz-popconfirm *ngIf="(data.reserveType == 1 || data.reserveType == 3) && data.reserveStatus == 0" nzTitle="确定要撤销该预约吗？" (nzOnConfirm)="withdraw(data.id)">撤销</a>
    </td>
  </ng-template>
</div>